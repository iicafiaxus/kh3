<!doctype html>
<head>
	<meta charset="utf-8">
	<title>KH3: Online Typesetter</title>
	<link rel=stylesheet href="kh3.css">
	<link rel=stylesheet href="kh3ui.css">
	<link rel=stylesheet href="kh3font.css">
	<style id=fontsize></style>
	<style id=fontfamily></style>
	<style id=printmode></style>
	<style id=screenmode></style>
	<style id=scaling></style>
	<script src="kh3.js"></script>
	<script src="kh3ui.js"></script>
	<script src="kh3font.js"></script>
	<script src="kh3parser.js"></script>
</head>
<body onload="kh3ui.init()">
	
	<!-- ====== 切り替えボタン ====== -->
	
	<!-- ====== 設定画面 ====== -->
	<div id=console class=screen>
		<header>
			<p>
				<button onclick="kh3ui.restoreConfig(), kh3ui.showPreview()">キャンセル</button>
				<span class=title></span> - ページ設定
			</p>
			<p>
				<button onclick="kh3ui.saveConfig(), kh3ui.showPreview()">確定</button>
			</p>
		</header>
		<div>
			<form>
				<fieldset>
					<legend>用紙サイズ</legend>
					<label>横<input type=number class=shortnumber id=txtPaperWidth value=210 size=5>mm</label>
					<label>縦<input type=number class=shortnumber id=txtPaperHeight value=297 size=5>mm</label>
						<button onclick="kh3ui.showPaperSizePanel(); return false;">プリセット...</button>
						<label><input type=checkbox id=chkInfinite>自動延長</label>
					</fieldset>
				
				<fieldset>
					<legend>級数</legend>
					<label>本文<input type=number class=shortnumber id=txtFontSize value=12 size=5>Q</label>
					<label><input type=number class=shortnumber id=txtLineHeight value=20 size=5>H</label>
					<label>ルビ<input type=number class=shortnumber id=txtRubySize value=6 size=5>Q</label>
				</fieldset>
				
				<fieldset>
					<legend>段組</legend>
					<label><input type=number class=shortnumber id=txtColumnCount value=2 size=5>段</label>
					<label>段間<input type=number class=shortnumber id=txtColumnMargin value=24 size=5>H</label>
				</fieldset>
				
				<fieldset>
					<legend>余白</legend>
					<label>天<input type=number class=shortnumber id=txtMarginTop value=20 size=5>mm</label>
					<br>
					<label>左<input type=number class=shortnumber id=txtMarginLeft value=20 size=5>mm</label>
					<label>右<input type=number class=shortnumber id=txtMarginRight value=20 size=5>mm</label>
					<br>
					<label>地<input type=number class=shortnumber id=txtMarginBottom value=20 size=5>mm</label>
				</fieldset>
				
				<fieldset>
					<legend>書字方向</legend>
					<label><input type=checkbox id=chkIsVertical checked>縦書き</label>
				</fieldset>
				
				<fieldset>
					<legend>段落</legend>
					<label><input type=checkbox id=chkParIndent checked>字下げ</label>
				</fieldset>
				
				<fieldset>
					<legend>自動修正</legend>
					<label><input type=checkbox id=chkCorrectPunct>カンマ・読点</label>
				</fieldset>
				
				<fieldset>
					<legend>余白の調整（整数倍）</legend>
					<label>天地の端数<select id=selTopMarginMethod>
						<option value=balance class=unimp>天地中央揃え</option>
						<option selected value=top>天に寄せる</option>
						<option value=bottom class=unimp>地に寄せる</option>
						<option value=justify class=unimp>均等割り</option>
					</select></label>
					<br>
					<label>左右の端数<select id=selSideMarginMethod>
						<option selected value=center>左右中央揃え</option>
						<option value=left class=unimp>左に寄せる</option>
						<option value=right class=unimp>右に寄せる</option>
						<option value=justify class=unimp>均等割り</option>
					</select></label>
				</fieldset>
				
				<fieldset>
					<legend>左右の余白の入れ替え</legend>
					<label><input type=checkbox id=chkIsMirroredWhenEven disabled>偶数ページ</label>
					<br>
					<label><input type=checkbox id=chkIsMirroredWhenVertical disabled>縦書きの場合</label>
				</fieldset>
				
				<fieldset>
					<legend>フォント</legend>
					<label>本文<input type=text id=txtFontName value="Noto Serif JP"></label>
					<label>ウェイト<input type=number class=shortnumber id=txtFontWeight value= 3 min=1 max=9></label>
					<br>
					<label>ルビ<input type=text id=txtRubyName value="Noto Serif JP"></label>
					<label>ウェイト<input type=number class=shortnumber id=txtRubyWeight value= 6 min=1 max=9></label>
					<br>
				</fieldset>
				
			</form>
		</div>
		
		<div id=modal></div>
		
		<div id=divPaperSizePanel class=dialog><h3>用紙サイズ</h3>
			<p>
				<button onclick="kh3ui.setPaperSize(210, 297), kh3ui.hidePaperSizePanel()">A4</button>
				<button onclick="kh3ui.setPaperSize(148, 210), kh3ui.hidePaperSizePanel()">A5</button>
				<button onclick="kh3ui.setPaperSize(182, 257), kh3ui.hidePaperSizePanel()">JIS B5</button>
			</p><p>
				<button onclick="kh3ui.setPaperSize(297, 210), kh3ui.hidePaperSizePanel()">A4横</button>
				<button onclick="kh3ui.setPaperSize(210, 148), kh3ui.hidePaperSizePanel()">A5横</button>
				<button onclick="kh3ui.setPaperSize(257, 182), kh3ui.hidePaperSizePanel()">JIS B5横</button>
			</p><p>
				<button onclick="kh3ui.setPaperSize(100, 148), kh3ui.hidePaperSizePanel()">ハガキ</button>
				<button onclick="kh3ui.setPaperSize(148, 100), kh3ui.hidePaperSizePanel()">ハガキ横</button>
				<button onclick="kh3ui.setPaperSize(55, 91), kh3ui.hidePaperSizePanel()">名刺</button>
				<button onclick="kh3ui.setPaperSize(91, 55), kh3ui.hidePaperSizePanel()">名刺横</button>
			</p><p>
				<button onclick="kh3ui.setPaperSize(105, 148), kh3ui.hidePaperSizePanel()">文庫</button>
				<button onclick="kh3ui.setPaperSize(105, 173), kh3ui.hidePaperSizePanel()">新書</button>
			</p>
			<hr>
			<p><button onclick="kh3ui.hidePaperSizePanel()">キャンセル</button></p>
		</div>
	</div>
	
	<!-- ==== 編集画面 ==== -->
	<div id=src>
		<header id=srcheader>
			<p>
				<button onclick="kh3ui.showFile()">閉じる</button>
				</p>
			<p>
				<button onclick="kh3ui.showPics()">画像...</button>
			</p>
			<p><span id=counter></span>文字 <button onclick="kh3ui.showPreview()">プレビュー</button></p>
		</header>
		<p id=pTitle>
				<input type=text id=txtTitle onkeyup="kh3ui.saveTitle()" onblur="kh3ui.saveTitle()" value="無題のテキスト">
		</p>
		<p id=area><textarea id=areaSource onkeyup="kh3ui.redrawEditor()" onblur="kh3ui.redrawEditor()" placeholder="ここに記述してください。"></textarea>
	</div>
	
	<!-- ==== プレビュー ==== -->
	<div id=main class=print>
		<header id=mode class=screen>
			<p>
				<button id=btnShowEditor onclick="kh3ui.showEditor()">戻る</button>
				<span class=title></span>
			</p>
			<p>
				<label>
				<input type=checkbox onchange="var main = document.getElementById('main'); if(this.checked) main.className += ' flex'; else main.className = main.className.replace(' flex', '');">
				FLEX(暫定)
				</label>
				<button id=btnRedraw onclick="kh3.clearMemoWidth(), kh3ui.showPreview()">再描画</button>
				<button id=btnShowConfig onclick="kh3ui.showConfig()">ページ設定...</button>
				<button id=btnPrint onclick="kh3ui.print()">印刷...</button>
				</p>
		</header>
		<div id=allH class=all></div>
		<div id=allV class=all></div>
		<footer></footer>
	</div>
	
	<!-- ==== ファイル選択 ==== -->
	<div id=file class=screen>
		<p class=menu>
			<button id="btnFileOpen" onclick="kh3ui.fileOpen()">開く</button>
			<button id="btnFileExport" onclick="kh3ui.fileExport()">エクスポート</button>
			<button id="btnFileDuplicate" onclick="kh3ui.fileDuplicate()">複製</button>
			<button id="btnFileDelete" onclick="kh3ui.fileDelete()">削除...</button>
		</p>
		<header>
			<p>KH3: Online Typesetter</p>
			<p>
			</p>
			<p>
			<button id="btnFileNew" onclick="kh3ui.fileNew()">新規作成...</button>
			<button id="btnFileImport" onclick="kh3ui.fileImport()">インポート...</button>
			</p>
		</header>
		<div id=divFileInfo></div>
		<ul id=ulFiles>
		</ul>
		</div>
	</div>
</body>
</html>
